<!DOCType html>
<html lang = 'en'> 
  <head>
    <title>friendUP</title>
    <link href="loginPage.css" rel="stylesheet" type="text/css" />
    <link rel="icon" type="image/x-icon" href="https://i.pinimg.com/564x/c6/b8/d4/c6b8d40a0af2b06eafc9b8c2d7ba30d2.jpg">
   </head>
  <body>
    <div class="left-right">
    <img src= catpic.jfif width="300" height="400" alt="cat" class="center">
    
<div class="friendUp_form">
<p> 
<!--<label type = "text"> Login</label>-->
<p style="font-size:60px" class="friendUpText">friendUp!</p> 
</p>

  <div class="login">
  <label style="font-size:25px">Enter your umich email:</label><br>
  <input type="text" id="email" name="email" ><br>
  <br> <label style="font-size:25px">Set your password:</label><br>
  <input type="password" id="password" name="password"><br><br>
  <button id="createAccountBtn">Create friendUp! Account</button> 
  </div>

</div>
</div>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyD81cBEPMt9kcBIFANHK8Z7E9zAMv0uYCg",
    authDomain: "friendup-74935.firebaseapp.com",
    projectId: "friendup-74935",
    storageBucket: "friendup-74935.appspot.com",
    messagingSenderId: "97865803459",
    appId: "1:97865803459:web:b5456ce09d5fb2106d2476",
    measurementId: "G-JHX6HNC0ST"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  import {getDatabase, set, ref, get, push} from "https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js";
  import { getAuth, createUserWithEmailAndPassword} from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";
  const db = getDatabase();

  var createAccountBtn = document.querySelector('#createAccountBtn')

  function createAccount(){
    
    var getUsername = document.getElementById('email').value  
    var getPassword = document.getElementById('password').value
    
    const auth = getAuth();
    
    createUserWithEmailAndPassword(auth,getUsername,getPassword)
    .then((userCredential) => {
      const user = userCredential.user;      
      sessionStorage.setItem('email',getUsername)
      var uniqueName = JSON.stringify(user.email)      
      sessionStorage.setItem('un',getUsername.slice(0,getUsername.indexOf('@')))
      window.location.href = 'profileCreation.html'
    })
    .catch((error)=>{
      const errorCode = error.code;
      const errorMessage = error.message;
      alert("Unsuccessful attempt please try again")
    });
  
}
  
  createAccountBtn.addEventListener('click', createAccount)
  
</script>

</body>


</html>

<!--.center {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 50%;
}-->